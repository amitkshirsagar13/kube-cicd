<?xml version='1.1' encoding='UTF-8'?>
<flow-definition plugin="workflow-job@2.24">
  <actions/>
  <description>Setup Jenkins Environment as per requirement</description>
  <keepDependencies>false</keepDependencies>
  <properties>
    <jenkins.model.BuildDiscarderProperty>
      <strategy class="hudson.tasks.LogRotator">
        <daysToKeep>1</daysToKeep>
        <numToKeep>2</numToKeep>
        <artifactDaysToKeep>-1</artifactDaysToKeep>
        <artifactNumToKeep>-1</artifactNumToKeep>
      </strategy>
    </jenkins.model.BuildDiscarderProperty>
  </properties>
  <definition class="org.jenkinsci.plugins.workflow.cps.CpsFlowDefinition" plugin="workflow-cps@2.54">
    <script>node {
    def config = &quot;https://raw.githubusercontent.com/amitkshirsagar13/kube-cicd/master/jenkins/config/config.xml&quot;
    def scriptApproval = &quot;https://raw.githubusercontent.com/amitkshirsagar13/kube-cicd/master/jenkins/config/scriptApproval.xml&quot;
    def url = &quot;http://10.106.6.202:8080/safeRestart&quot;
        
   sh &quot;&quot;&quot;
        
        curl -s -o /var/jenkins_home/config.xml &quot;${config}&quot;
        curl -s -o /var/jenkins_home/scriptApproval.xml &quot;${scriptApproval}&quot;
        
        curl -s -X POST &quot;${url}&quot; --user &quot;admin:admin&quot;
   &quot;&quot;&quot;
}</script>
    <sandbox>true</sandbox>
  </definition>
  <triggers/>
  <disabled>false</disabled>
</flow-definition>